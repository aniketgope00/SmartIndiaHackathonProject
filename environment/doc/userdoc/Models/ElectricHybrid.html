<!--
MkDocs version : 1.5.2
Build Date UTC : 07 May 2024 06:14:12
Last edit: 03 April 2024
-->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta property="og:image" content="../images/image-facebook.jpg">
        <meta property="og:image:type" content="image/jpeg">
        <meta property="og:image:width" content="1080">
        <meta property="og:image:height" content="1080">

        
        
        <link rel="canonical" href="https://sumo.dlr.de/docs/Models/ElectricHybrid.html">
        <link rel="shortcut icon" href="../images/favicon.ico">
        <title>ElectricHybrid - SUMO Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-3.7.0.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 

      <script>
        // DARK MODE
        function detectColorScheme(){
          var theme="light";

          if(localStorage.getItem("sumo-docs-theme")){
              if(localStorage.getItem("sumo-docs-theme") == "dark"){
                  var theme = "dark";
              }
          } else if(!window.matchMedia) {
              return false;
          } else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
              var theme = "dark";
          }

          if (theme=="dark") {
              document.documentElement.setAttribute("data-theme", "dark");
          }
        }
        detectColorScheme();
      </script>

    </head>

    <body>

        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary text-center">
            <div class="container-fluid">
                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../index.html" class="nav-link">Documentation</a>
                            </li>
                            <li class="navitem">
                                <a href="../Tutorials/index.html" class="nav-link">Tutorials</a>
                            </li>
                            <li class="navitem">
                                <a href="../FAQ.html" class="nav-link">FAQ</a>
                            </li>
                            <li class="navitem">
                                <a href="../Downloads.html" class="nav-link">Downloads</a>
                            </li>
                            <li class="navitem">
                                <a href="../Publications.html" class="nav-link">Publications</a>
                            </li>
                            <li class="navitem">
                                <a href="../Developer/index.html" class="nav-link">Developer</a>
                            </li>
                            <li class="navitem">
                                <a href="../ChangeLog.html" class="nav-link">ChangeLog</a>
                            </li>
                            <li class="navitem">
                                <a href="https://eclipse.dev/sumo/contact/" class="nav-link">Contact</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa-solid fa-magnifying-glass"></i> <u>S</u>earch
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="edit" href="https://github.com/eclipse-sumo/sumo/edit/main/docs/web/docs/Models/ElectricHybrid.md" class="nav-link"><i class="fa-brands fa-github"></i> <u>E</u>dit on GitHub</a>
                            </li>
                      <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                            More <i class="fa-solid fa-circle-chevron-down"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item no-arrow-link" href="https://github.com/eclipse/sumo/issues">Report a Bug / Issue / Typo</a>
                            <a class="dropdown-item" href="../Editing_Articles.html">Help on editing articles</a>
                            <a class="dropdown-item" href="https://github.com/eclipse/sumo/commits/main/docs/web">Recent documentation changes</a>
                            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#mkdocs_keyboard_modal">Keyboard Shortcuts</a>
                            <a class="dropdown-item no-arrow-link" href="https://sumo.dlr.de/sumo_documentation.zip">Download the Documentation</a>
                            <span class="dropdown-item" id="dark-mode-div">Dark mode <label id="theme-switch" class="theme-switch" for="checkbox_theme">
                              <input type="checkbox" id="checkbox_theme">
                          </label></span>
                          </div>
                        </li>
                        <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="languagedrop" data-toggle="dropdown">
                            <i class="fa-solid fa-language"></i> Languages <i class="fa-solid fa-circle-chevron-down"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <span class="dropdown-item">
                              Translations are generated automatically by Google Translate:
                            </span>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Models/ElectricHybrid.html?_x_tr_sl=en&_x_tr_tl=de">Deutsch</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Models/ElectricHybrid.html?_x_tr_sl=en&_x_tr_tl=es">Español</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Models/ElectricHybrid.html?_x_tr_sl=en&_x_tr_tl=fr">Français</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Models/ElectricHybrid.html?_x_tr_sl=en&_x_tr_tl=it">Italiano</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Models/ElectricHybrid.html?_x_tr_sl=en&_x_tr_tl=hu">Magyar</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Models/ElectricHybrid.html?_x_tr_sl=en&_x_tr_tl=tr">Türkçe</a>
                          </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container-fluid">
          <div class="row">
                <div class="col-md-3">
                  <div class="text-center"><a href="../index.html" style="display: inline-block; margin-top: 5px;"><img src="../images/sumo-logo.png" class="sumoLogo" alt="SUMO Logo" width="120px"></a></div>
                  
<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Contents">
            <span class="fa-solid fa-angle-down"></span>
        </button>
    </div>
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary toc-scroll toc">
        <ul class="nav flex-column bs-sidenav">
            <p style="margin-top:5px; color:#777777;" class="text-center">Contents</p>
            <li class="nav-item main"><a href="#overview">Overview</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#defining_battery-assisted_trolleybuses" class="nav-link">• Defining Battery-assisted Trolleybuses</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#traction_substation" class="nav-link">• Traction Substation</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#overhead_wires" class="nav-link">• Overhead Wires</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#simulation_setting" class="nav-link">• Simulation setting</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#outputs" class="nav-link">• Outputs</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#overhead_wire_segments_output" class="nav-link">&rarr; Overhead wire segments output</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#electric_substation_output" class="nav-link">&rarr; Electric Substation output</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#electrichybrid_output" class="nav-link">• ElectricHybrid output</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#emission_output" class="nav-link">• Emission Output</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#model_details" class="nav-link">• Model Details</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#known_limitations" class="nav-link">• Known Limitations</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#charging_stations" class="nav-link">&rarr; Charging Stations</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#saving_and_loading_simulation_state" class="nav-link">&rarr; Saving and Loading Simulation State</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#traci" class="nav-link">&rarr; TraCI</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#other_limitations" class="nav-link">&rarr; Other Limitations</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#publications" class="nav-link">&rarr; Publications</a>
                </li>
        </ul>
    </div>

    <div class="admonition conference" style="position: sticky; margin-top: 20px; margin-bottom:10px;">
        <p>visit <a class="no-arrow-link" href="https://eclipse.dev/sumo">eclipse.dev/sumo</a></p>
    </div>

</div>
                </div>
                <div class="col-md-9 main-area" role="main">
                   <!-- page.is_homepage seems to be broken in Mkdocs > 1.1.0 -->
                  <ul class="breadcrumbs">
    <script>
        var pagePath = "/docs/Models/ElectricHybrid.html";
        var splitUrl = pagePath.split("/");
        splitUrl.pop();
        splitUrl.shift();
        if (splitUrl[0] == 'docs') splitUrl.shift();
        var homeLink = "../index.html";
        document.write('<li class="breadcrumb-item"><a href="' + homeLink + '"><i class="fa-solid fa-house"></i></a></li>');
        var prev = '';

        var dirLink = splitUrl.map(function (el) {
        el = prev + el; prev = el + '/'; return el;
        });

        for (let i = 0; i < splitUrl.length; i++) {
            document.write("<li class=\"breadcrumb-item\"><a class=\"no-arrow-link\" href=\"../" + dirLink[i] + "\">" + splitUrl[i] + "</a></li>");
        }
    </script>
    <li class="breadcrumb-item active">ElectricHybrid</li>
</ul>
                  <hTitles>ElectricHybrid<hr style="border: 0.5px solid #338033; margin-top: 5px !important;"></hTitles>
                  
                  

<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h1>
<p>Since version 1.5.0 SUMO extends the original <a href="Electric.html">electric</a> vehicle model with a model that simulates
also internal electric parameters of an battery-assisted trolleybus, i.e. a vehicle that is being powered by overhead wires and
has also a battery pack installed. The battery pack is charged from the overhead wires rather than from a standalone charging station.</p>
<p>The model allows not only for vehicle
simulation, but the simulation may also include detailed electrical simulation of the overhead wire circuit behavior.
It was implemented by Jakub Ševčík and Jan Přikryl from the <a href="https://rice.zcu.cz/en">RICE FEE UWB Pilsen</a>.
The core of the model is implemented in the <a href="../Developer/How_To/Device.html">vehicle device</a> <em>device.elechybrid</em>.
The model is defined as a set of <a href="../index.html#additional_features"><em>additional features</em></a>.
The features provided and used by the model are traction substations that provide power to the overhead wire
network, a set of overhead wires (which can be placed over any lane in the network) representing a contact line
providing energy to ElecHybrid vehicles, including wire clamps/links, and a new output options
<strong>--elechybrid-output</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;FILE&gt;</em></a>, <strong>--overheadwiresegments-output</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;FILE&gt;</em></a> and <strong>--substations-output</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;FILE&gt;</em></a>.</p>
<p>A conceptual test case for the implementation can be found in [[1]].</p>
<h2 id="defining_battery-assisted_trolleybuses">Defining Battery-assisted Trolleybuses<a class="headerlink" href="#defining_battery-assisted_trolleybuses" title="Permanent link">#</a></h2>
<p>To define an electric vehicle with an in-motion charging system, it must be equipped with a hybrid electric device <em>device.elechybrid</em>.
This may be accomplished explicitly by using the option <strong>--device.elechybrid.explicit &lt;vehID1,vehID2,...&gt;</strong> or simply by
setting <strong>--device.elechybrid.probability 1</strong> to provide the device to all vehicles. Alternatively, the device may be
specified using the <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#devices">generic vehicle parameters</a>.</p>
<p>Additional properties of the vehicle and its electrical components are defined via
<a href="../Simulation/GenericParameters.html">parameters of the vehicle or its type</a>. The values related to <em>device.elechybrid</em> have
the following meanings:</p>
<table>
<thead>
<tr>
<th>key</th>
<th>Value Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>maximumBatteryCapacity</td>
<td>float</td>
<td>0 (Wh)</td>
<td>Maximum battery capacity <em>E<sub>max</sub></em></td>
</tr>
<tr>
<td>overheadWireChargingPower</td>
<td>float</td>
<td>0 (W)</td>
<td>Constant additional power drawn from an overhead wire if charging a battery</td>
</tr>
<tr>
<td>maximumPower</td>
<td>float</td>
<td>100000 (W)</td>
<td>Maximum power of the vehicle electric <strong>drive</strong></td>
</tr>
<tr>
<td>vehicleMass</td>
<td>float</td>
<td>1000 (kg)</td>
<td>Vehicle mass <em>m<sub>veh</sub></em></td>
</tr>
<tr>
<td>frontSurfaceArea</td>
<td>float</td>
<td>5 (m<sup>2</sup>)</td>
<td>Front surface area <em>A<sub>veh</sub></em></td>
</tr>
<tr>
<td>airDragCoefficient</td>
<td>float</td>
<td>0.6</td>
<td>Air drag coefficient <em>c<sub>w</sub></em></td>
</tr>
<tr>
<td>rotatingMass</td>
<td>float</td>
<td>40 (kg)</td>
<td>(Equivalent) mass of internal rotating elements</td>
</tr>
<tr>
<td>radialDragCoefficient</td>
<td>float</td>
<td>0.5</td>
<td>Radial drag coefficient c<sub>rad</sub></td>
</tr>
<tr>
<td>rollDragCoefficient</td>
<td>float</td>
<td>0.01</td>
<td>Rolling resistance coefficient <em>c<sub>roll</sub></em></td>
</tr>
<tr>
<td>constantPowerIntake</td>
<td>float</td>
<td>1000 (W)</td>
<td>Constant consumption of vehicle (auxiliary) systems <em>P<sub>const</sub></em></td>
</tr>
<tr>
<td>propulsionEfficiency</td>
<td>float</td>
<td>0.9</td>
<td>Drive efficiency <em>η<sub>prop</sub></em></td>
</tr>
<tr>
<td>recuperationEfficiency</td>
<td>float</td>
<td>0.8</td>
<td>Recuperation efficiency (constant) <em>η<sub>recup</sub></em></td>
</tr>
<tr>
<td>recuperationEfficiencyByDecel</td>
<td>float</td>
<td>0.0</td>
<td>Recuperation efficiency (by deceleration)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In contrast with the battery device, the <code>maximumPower</code> parameter defines the maximum power of vehicle electric
motor. The rest of the parameters in the table are common for model of electric energy consumption and have the same meaning.</p>
</div>
<p>An example of a vehicle with hybrid electric attribute is almost identical with that of an electric vehicle:</p>
<pre class="codehilite"><code class="language-xml">&lt;routes&gt;
    &lt;vType id=&quot;trolleybus&quot; accel=&quot;0.8&quot; decel=&quot;1.0&quot; length=&quot;12&quot; maxSpeed=&quot;18.0&quot; sigma=&quot;0.0&quot; minGap=&quot;2.5&quot;
           emissionClass=&quot;Energy/unknown&quot;  vClass=&quot;bus&quot; guiShape=&quot;bus/trolley&quot; color=&quot;0,1,0&quot;&gt;
      &lt;param key=&quot;maximumBatteryCapacity&quot; value=&quot;50000&quot;/&gt;
      &lt;param key=&quot;overheadWireChargingPower&quot; value=&quot;10000&quot;/&gt;
      &lt;param key=&quot;maximumPower&quot; value=&quot;200000&quot;/&gt;
      &lt;param key=&quot;vehicleMass&quot; value=&quot;10000&quot;/&gt;
      &lt;param key=&quot;frontSurfaceArea&quot; value=&quot;7.5&quot;/&gt;
      &lt;param key=&quot;airDragCoefficient&quot; value=&quot;0.59&quot;/&gt;
      &lt;param key=&quot;rotatingMass&quot; value=&quot;100&quot;/&gt;
      &lt;param key=&quot;radialDragCoefficient&quot; value=&quot;0.5&quot;/&gt;
      &lt;param key=&quot;rollDragCoefficient&quot; value=&quot;0.061&quot;/&gt;
      &lt;param key=&quot;constantPowerIntake&quot; value=&quot;5000&quot;/&gt;
      &lt;param key=&quot;propulsionEfficiency&quot; value=&quot;0.9&quot;/&gt;
      &lt;param key=&quot;recuperationEfficiency&quot; value=&quot;0.9&quot;/&gt;
      &lt;param key=&quot;recuperationEfficiencyByDecel&quot; value=&quot;0.&quot;/&gt;
      &lt;param key=&quot;&quot; value=&quot;&quot;/&gt;
    &lt;/vType&gt;
&lt;/routes&gt;
</code></pre>

<p>The initial energy content of the battery (by default 0.0 Wh) can be set in the vehicle definitions:</p>
<pre class="codehilite"><code class="language-xml">&lt;routes&gt;
    &lt;vehicle id=&quot;0&quot; type=&quot;trolleybus&quot; depart=&quot;0&quot; route=&quot;route1&quot; color=&quot;1,0,0&quot;&gt;
        &lt;param key=&quot;actualBatteryCapacity&quot; value=&quot;5000&quot;/&gt;
    &lt;/vehicle&gt;
&lt;/routes&gt;
</code></pre>

<h2 id="traction_substation">Traction Substation<a class="headerlink" href="#traction_substation" title="Permanent link">#</a></h2>
<p>A traction substation represents a transformer station that is responsible for powering a certain
set of overhead wire circuits. The current implementation of this element is quite simple: the
substation provides information about the nominal voltage of the overhead wire at the point where
the substation feeder line is connected to the circuit, and it also specifies the maximum current
that can be drawn from the feeder (this imposes a maximum power limit on that substation).</p>
<table>
<thead>
<tr>
<th>key</th>
<th>Value Type</th>
<th>Value range</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td>id</td>
<td></td>
<td>Traction substation ID (must be unique)</td>
</tr>
<tr>
<td><strong>voltage</strong></td>
<td>float</td>
<td>voltage &gt; 0</td>
<td>600 V</td>
<td>Voltage of at connection point for the overhead wire</td>
</tr>
<tr>
<td><strong>currentLimit</strong></td>
<td>float</td>
<td>currentLimit &gt; 0</td>
<td>400 A</td>
<td>Current limit of the feeder line</td>
</tr>
</tbody>
</table>
<pre class="codehilite"><code class="language-xml">&lt;additionals&gt;
    &lt;tractionSubstation id=&quot;Sub1&quot; voltage=&quot;600&quot; currentLimit=&quot;1000&quot;/&gt;
&lt;/additionals&gt;
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>currentLimit</code> parameter of the substation is silently ignored and does not trigger
a power limit of the feeder in SUMO 1.10.0</p>
</div>
<h2 id="overhead_wires">Overhead Wires<a class="headerlink" href="#overhead_wires" title="Permanent link">#</a></h2>
<p>An overhead wire circuit is a set of overhead wires that are connected to a certain traction substation.
The circuit may contain clamps/links that interconnect different parts of the circuit and that improve its
electric parameters of the circuit when it is under higher load (a pair of clamps/links typically
interconnects two positive and two negative overhead wires for both travel directions at some
point on the same street).</p>
<p>We also allow the substation feeder line to be connected to more than a single place in the circuit, which
is another measure to ensure more uniform distribution of power in the circuit.</p>
<p>The overhead wire network is part of <a href="../index.html#additional_features"><em>additional features</em></a>
provided by SUMO. It is constructed by specifying one or more <code>&lt;overheadWire&gt;</code> elements, representing
a continuous section of traction wire. Each of this sections consists of <code>&lt;overheadWireSegment&gt;</code> elements
that are defined on lanes of the SUMO network.
Each segment may be shorter than the lane length, and a beginning or ending offset may be specified &ndash; this
is typically used in trolleybus network to start or end the overhead wire at a bus stop where the trolley poles
are put on/off the overhead wire. At least one such segment has to be connected to a substation to form a circuit.</p>
<div class="admonition note">
<p class="admonition-title">Note #1</p>
<p>Additional segments are automatically created for internal lanes of an intersection, unless the lane is explicitly
ignored using <code>forbiddenInnerLanes</code> attribute in the definition of the <code>&lt;overheadWire&gt;</code> element (see below).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note #2</p>
<p>The current implementation does not allow users to specify the exact point in a segment where
the substation is connected. This is a simplification that in our experience causes a negligible error
in circuit simulation results.</p>
</div>
<table>
<thead>
<tr>
<th>key</th>
<th>Value Type</th>
<th>Value range</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td>id</td>
<td></td>
<td>Overhead wire segment ID (must be unique)</td>
</tr>
<tr>
<td><strong>lane</strong></td>
<td>string</td>
<td>valid lane id</td>
<td></td>
<td>Lane over which the segment is placed</td>
</tr>
<tr>
<td><strong>voltageSource</strong></td>
<td>boolean</td>
<td><em>true</em> or <em>false</em></td>
<td><em>false</em></td>
<td>If <em>true</em>, the beginning point of the segment is connected to a substation</td>
</tr>
<tr>
<td><strong>startPos</strong></td>
<td>float</td>
<td>0 &lt;= <em>x</em> &lt; lane.length</td>
<td>0</td>
<td>Starting position in the specified lane</td>
</tr>
<tr>
<td><strong>endPos</strong></td>
<td>float</td>
<td>0 &lt; <em>x</em> &lt;= lane.length</td>
<td>lane.length</td>
<td>Ending position in the specified lane</td>
</tr>
</tbody>
</table>
<p>Overhead wire segments are defined in an additional file using the following format:</p>
<pre class="codehilite"><code class="language-xml">&lt;additionals&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_gneE0_0&quot; lane=&quot;gneE0_0&quot; voltageSource=&quot;true&quot; /&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_gneE1_0&quot; lane=&quot;gneE1_0&quot; /&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_gneE3_0&quot; lane=&quot;gneE3_0&quot; /&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_gneE4_0&quot; lane=&quot;gneE4_0&quot; /&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_gneE5_0&quot; lane=&quot;gneE5_0&quot; voltageSource=&quot;true&quot;/&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_-gneE3_0&quot; lane=&quot;-gneE3_0&quot; /&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_-gneE1_0&quot; lane=&quot;-gneE1_0&quot; /&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_-gneE0_0&quot; lane=&quot;-gneE0_0&quot;  startPos=&quot;0.0&quot; endPos=&quot;40.&quot; /&gt;
&lt;/additionals&gt;
</code></pre>

<p>We can also try to improve electric parameters of the circuit by specifying <em>overhead wire clamps</em> that interconnect
selected overhead wire segments (these are typically overhead wire segments in the opposite directions on the same street):</p>
<table>
<thead>
<tr>
<th>key</th>
<th>Value Type</th>
<th>Value range</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td>ID</td>
<td></td>
<td>Overhead wire clamp ID (must be unique)</td>
</tr>
<tr>
<td><strong>substationId</strong></td>
<td>string</td>
<td>valid substation ID</td>
<td></td>
<td>Substation which can employ the overhead wire clamp</td>
</tr>
<tr>
<td><strong>idSegmentStartClamp</strong></td>
<td>string</td>
<td>valid segment ID</td>
<td></td>
<td>ID of the overhead wire segment, to the start of which the overhead wire clamp is connected</td>
</tr>
<tr>
<td><strong>idSegmentEndClamp</strong></td>
<td>string</td>
<td>valid segment ID</td>
<td></td>
<td>ID of the overhead wire segment, to the end of which the overhead wire clamp is connected</td>
</tr>
</tbody>
</table>
<p>An example of using the <code>&lt;overheadWireClamp&gt;</code> element connecting the contact line segments on
lanes <code>-gneE0_0</code> and <code>gneE0_0</code> is given below:</p>
<pre class="codehilite"><code class="language-xml">&lt;additionals&gt;
    &lt;overheadWireClamp id=&quot;clamp1&quot; substationId=&quot;Sub1&quot;
        idSegmentStartClamp=&quot;ovrhdSgmnt_-gneE0_0&quot; idSegmentEndClamp=&quot;ovrhdSgmnt_gneE0_0&quot; /&gt;
&lt;/additionals&gt;
</code></pre>

<p>Once the overhead wire segments (and overhead wire clamps) have been specified, an electric circuit can be defined
using the <code>&lt;overheadWire&gt;</code> element with the following attributes:</p>
<table>
<thead>
<tr>
<th>key</th>
<th>Value Type</th>
<th>Value range</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>segments</strong></td>
<td>string[]</td>
<td>list of overhead wire segment IDs</td>
<td></td>
<td>Segments that form the given circuit</td>
</tr>
<tr>
<td><strong>substationId</strong></td>
<td>string</td>
<td>valid substation ID</td>
<td></td>
<td>Substation to which the circuit is connected</td>
</tr>
<tr>
<td><strong>clamps</strong></td>
<td>string[]</td>
<td>list of overhead wire clamp IDs</td>
<td></td>
<td>Overhead wire clamps which interconnect overhead wire segments</td>
</tr>
<tr>
<td><strong>forbiddenInnerLanes</strong></td>
<td>string[]</td>
<td>list of forbidden lane IDs</td>
<td></td>
<td>Inner lanes, where placing of overhead wire is restricted</td>
</tr>
</tbody>
</table>
<pre class="codehilite"><code class="language-xml">&lt;additionals&gt;
    &lt;overheadWire segments=&quot;ovrhdSgmnt_gneE0_0 ovrhdSgmnt_gneE1_0 ovrhdSgmnt_gneE3_0 ovrhdSgmnt_gneE4_0 ovrhdSgmnt_gneE5_0 ovrhdSgmnt_-gneE3_0 ovrhdSgmnt_-gneE1_0 ovrhdSgmnt_-gneE0_0&quot;
                  substationId=&quot;Sub1&quot; clamps=&quot;clamp1&quot; forbiddenInnerLanes=&quot;:gneJ4_2_0&quot; /&gt;
&lt;/additionals&gt;
</code></pre>

<p>The overhead wire powering/charging system is represented in the graphical user interface as a two-wire system:</p>
<p><img alt="" src="../images/overheadWire_gui_labeled.png" title="Representation of the overhead wire in GUI" />
Representation of the overhead wire in GUI</p>
<p>If a vehicle equipped with <em>device.elechybrid</em> drives under the wire, the overhead wire segment colors
display a <em>(currently hardcoded)</em> color map indicating actual traction wire voltage, and also the number
of connected ElecHybrid vehicles on that segment -- see image below.</p>
<p><img alt="" src="../images/overheadWire_withElecHybrid_gui_labeled.png" title="Color change of an overhead wire" />
Color of overhead wire in case that some power is supplied to a vehicle</p>
<h2 id="simulation_setting">Simulation setting<a class="headerlink" href="#simulation_setting" title="Permanent link">#</a></h2>
<p>It is possible to activate or deactivate overhead wire solver, enable or disable the recuperation of energy from vehicles to overhead wire, and apply or ignore substation's electric current limits in the overhead wire solver. The above mentioned properties are set in configuration file using the following format.</p>
<pre class="codehilite"><code class="language-xml">&lt;configuration&gt;
    ...
    &lt;processing&gt;
        &lt;overhead-wire-solver value=&quot;true&quot;/&gt;
        &lt;overhead-wire-recuperation value=&quot;true&quot;/&gt;
        &lt;overhead-wire-substation-current-limits value=&quot;true&quot;/&gt;
    &lt;/processing&gt;
    ...
&lt;/configuration&gt;
</code></pre>

<p>All three mentioned values are set to "true" by default.</p>
<h2 id="outputs">Outputs<a class="headerlink" href="#outputs" title="Permanent link">#</a></h2>
<p>The <em>device.elechybrid</em> and its related objects provide several output streams:
* traction substation output
* overhead wire segment output
* electric hybrid vehicle output</p>
<h3 id="overhead_wire_segments_output">Overhead wire segments output<a class="headerlink" href="#overhead_wire_segments_output" title="Permanent link">#</a></h3>
<p>The option <code>--overheadwiresegments-output "overheadWires.out.xml"</code> or its config file equivalent</p>
<pre class="codehilite"><code class="language-xml">&lt;output&gt;
    &lt;overheadwiresegments-output value=&quot;overheadWires.out.xml&quot;/&gt;
&lt;/output&gt;
</code></pre>

<p>generates a full report of energy provided by overhead wire segments.</p>
<p>The output file <code>overheadWires.out.xml</code> has the following structure:</p>
<pre class="codehilite"><code class="language-xml">&lt;overheadWireSegments-export&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_gneE0_0&quot; tractionSubstationId=&quot;Sub1&quot; totalEnergyCharged=&quot;0.00&quot; chargingSteps=&quot;0&quot; lane=&quot;gneE0_0&quot;/&gt;
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_gneE1_0&quot; tractionSubstationId=&quot;Sub1&quot; totalEnergyCharged=&quot;0.00&quot; chargingSteps=&quot;0&quot; lane=&quot;gneE1_0&quot;/&gt;
    ...
    &lt;overheadWireSegment id=&quot;ovrhdSgmnt_gneE5_0&quot; tractionSubstationId=&quot;Sub1&quot; totalEnergyCharged=&quot;250.92&quot; chargingSteps=&quot;11&quot; lane=&quot;gneE5_0&quot;&gt;
        &lt;vehicle id=&quot;test1&quot; type=&quot;trolleybus&quot; totalEnergyChargedIntoVehicle=&quot;250.92&quot; chargingBegin=&quot;1.00&quot; chargingEnd=&quot;11.00&quot; maximumBatteryCapacity=&quot;46000.00&quot;&gt;
            &lt;step time=&quot;1.00&quot; chargingStatus=&quot;charging&quot; energyCharged=&quot;16.17&quot; partialCharge=&quot;16.17&quot; voltage=&quot;699.98&quot; actualBatteryCapacity=&quot;23011.11&quot;/&gt;
            &lt;step time=&quot;2.00&quot; chargingStatus=&quot;charging&quot; energyCharged=&quot;20.66&quot; partialCharge=&quot;36.83&quot; voltage=&quot;699.94&quot; actualBatteryCapacity=&quot;23022.22&quot;/&gt;
            ...
        &lt;/vehicle&gt;
        ...
    &lt;/overheadWireSegment&gt;
    ...
    &lt;overheadWireSegment id=&quot;ovrhd_inner_:gneJ1_0_1&quot; tractionSubstationId=&quot;Sub2&quot; totalEnergyCharged=&quot;30.15&quot; chargingSteps=&quot;1&quot; lane=&quot;:gneJ1_0_1&quot;&gt;
        &lt;vehicle id=&quot;test1&quot; type=&quot;trolleybus&quot; totalEnergyChargedIntoVehicle=&quot;30.15&quot; chargingBegin=&quot;12.00&quot; chargingEnd=&quot;12.00&quot; maximumBatteryCapacity=&quot;46000.00&quot;&gt;
            &lt;step time=&quot;12.00&quot; chargingStatus=&quot;charging&quot; energyCharged=&quot;30.15&quot; partialCharge=&quot;30.15&quot; voltage=&quot;698.54&quot; actualBatteryCapacity=&quot;23133.33&quot;/&gt;
        &lt;/vehicle&gt;
    &lt;/overheadWireSegment&gt;
    ...
&lt;/overheadWireSegments-export&gt;
</code></pre>

<p>For the entire overhead wire segment described by the <code>&lt;overheadWireSegment&gt;</code> tag we output the following attributes:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td></td>
<td>Overhead wire segment ID</td>
</tr>
<tr>
<td><strong>tractionSubstationId</strong></td>
<td>string</td>
<td></td>
<td>Traction substation ID</td>
</tr>
<tr>
<td><strong>totalEnergyCharged</strong></td>
<td>float</td>
<td>Wh</td>
<td>Total energy supplied by overhead wire segment into eleHybrid vehicles (minus energy recuperated into overhead wire segment) during the entire simulation</td>
</tr>
<tr>
<td><strong>chargingSteps</strong></td>
<td>int</td>
<td></td>
<td>Number of simulation steps in which some vehicle is connected to the segment</td>
</tr>
<tr>
<td><strong>lane</strong></td>
<td>string</td>
<td></td>
<td>Lane ID of the segment</td>
</tr>
</tbody>
</table>
<p>For each vehicle that has been powered (or that has recuperated energy) on a given segment:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td></td>
<td>ID of vehicle that is being powered by the segment</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td>string</td>
<td></td>
<td>Type of vehicle</td>
</tr>
<tr>
<td><strong>totalEnergyChargedIntoVehicle</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy provided during the travel on the segment</td>
</tr>
<tr>
<td><strong>chargingBegin</strong></td>
<td>float</td>
<td>s</td>
<td>Time step in which vehicle starts to be connected to segment</td>
</tr>
<tr>
<td><strong>chargingEnd</strong></td>
<td>float</td>
<td>s</td>
<td>Time step in which vehicle finishes to be connected to segment</td>
</tr>
<tr>
<td><strong>maximumBatteryCapacity</strong></td>
<td>float</td>
<td>Wh</td>
<td>Maximum battery capacity of the vehicle</td>
</tr>
</tbody>
</table>
<p>For every time step in that the vehicle is being powered by the segment:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>time</strong></td>
<td>float</td>
<td>s</td>
<td>Current time step of the simulation</td>
</tr>
<tr>
<td><strong>energyCharged</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy charged in the current time step</td>
</tr>
<tr>
<td><strong>partialCharge</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy charged by the segment since vehicle entered the segment</td>
</tr>
<tr>
<td><strong>voltage</strong></td>
<td>float</td>
<td>V</td>
<td>Current voltage in the overhead wire</td>
</tr>
<tr>
<td><strong>actualBatteryCapacity</strong></td>
<td>float</td>
<td>Wh</td>
<td>Current battery capacity of vehicle</td>
</tr>
</tbody>
</table>
<h3 id="electric_substation_output">Electric Substation output<a class="headerlink" href="#electric_substation_output" title="Permanent link">#</a></h3>
<p>Option <code>--substations-output "nameOfFile.xml"</code> generates a full report of energy provided by substations:</p>
<pre class="codehilite"><code class="language-xml">&lt;output&gt;
    &lt;substations-output value=&quot;substations.out.xml&quot;/&gt;
&lt;/output&gt;
</code></pre>

<p>File <code>substations.out.xml</code> has the following structure:</p>
<pre class="codehilite"><code class="language-xml">&lt;substations-export&gt;
    &lt;tractionSubstation id=&quot;Sub1&quot; totalEnergyCharged=&quot;-1360.85&quot; length=&quot;316.63&quot; numVoltageSources=&quot;2&quot; numClamps=&quot;1&quot; chargingSteps=&quot;50&quot;&gt;
        &lt;step time=&quot;1.00&quot; vehicleIDs=&quot;elecHybrid_0&quot; numVehicles=&quot;1&quot; chargingStatus=&quot;&quot; energyCharged=&quot;-15.13&quot; current=&quot;90.75&quot; currents=&quot;80.1860 10.5661&quot; voltage=&quot;600.00&quot; alphaCircuitSolver=&quot;1.00&quot; alphaFlag=&quot;0&quot;/&gt;
        &lt;step time=&quot;2.00&quot; vehicleIDs=&quot;elecHybrid_0&quot; numVehicles=&quot;1&quot; chargingStatus=&quot;&quot; energyCharged=&quot;-18.58&quot; current=&quot;111.51&quot; currents=&quot;96.9147 14.5929&quot; voltage=&quot;600.00&quot; alphaCircuitSolver=&quot;1.00&quot; alphaFlag=&quot;0&quot;/&gt;
        ...
    &lt;/tractionSubstation&gt;
    ...
&lt;/substations-export&gt;
</code></pre>

<p>For the <code>&lt;tractionSubstation&gt;</code> entry representing a traction substation:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td></td>
<td>Traction substation ID</td>
</tr>
<tr>
<td><strong>totalEnergyCharged</strong></td>
<td>float</td>
<td>Wh</td>
<td>Sum of energy charged by all voltage sources into overhead wires during the entire simulation</td>
</tr>
<tr>
<td><strong>length</strong></td>
<td>float</td>
<td>m</td>
<td>The length of the section powered by the substation</td>
</tr>
<tr>
<td><strong>numVoltageSources</strong></td>
<td>int</td>
<td></td>
<td>Number of voltage sources (i.e., number of connections of the substation to the circuit)</td>
</tr>
<tr>
<td><strong>numClamps</strong></td>
<td>int</td>
<td></td>
<td>Number of overhead wire clamps in the section powered by the substation</td>
</tr>
<tr>
<td><strong>chargingSteps</strong></td>
<td>int</td>
<td></td>
<td>Number of simulation steps in which the substation provided energy</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>totalEnergyCharged</code> attribute denotes the energy is supplied <em>from</em> the substation <em>to</em> a vehicle and
therefore it is typically negative.The value would be positive only in case that regenerative
braking into a hypothetical substation battery back is allowed and the vehicles regenerate more energy than the substation
provided to them.</p>
</div>
<p>Every time step in which the substation is active is represented by the <code>&lt;step&gt;</code> element with the following attributes:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>time</strong></td>
<td>float</td>
<td>s</td>
<td>Current timestep</td>
</tr>
<tr>
<td><strong>vehicleIDs</strong></td>
<td>string[]</td>
<td></td>
<td>List of IDs of vehicles powered by the substation</td>
</tr>
<tr>
<td><strong>numVehicles</strong></td>
<td>int</td>
<td></td>
<td>Number of vehicles powered by the substation</td>
</tr>
<tr>
<td><strong>energyCharged</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy  charged by substation in the current time step</td>
</tr>
<tr>
<td><strong>current</strong></td>
<td>float</td>
<td>A</td>
<td>Sum of currents flowing from the substation (i.e., through all voltage sources )</td>
</tr>
<tr>
<td><strong>currents</strong></td>
<td>floats[]</td>
<td>A</td>
<td>Currents flowing through all voltage sources</td>
</tr>
<tr>
<td><strong>voltage</strong></td>
<td>float</td>
<td>V</td>
<td>Nominal voltage of the traction substation</td>
</tr>
<tr>
<td><strong>alphaCircuitSolver</strong></td>
<td>float</td>
<td></td>
<td>Value of parameter <em>&alpha;</em> used in the circuit solver</td>
</tr>
<tr>
<td><strong>alphaFlag</strong></td>
<td>int (enum)</td>
<td></td>
<td>Value of the internal flag giving the reason why <em>&alpha;</em> has to be used</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Also in this case the <code>energyCharged</code> is negative as it flow <em>from</em> the substation in most cases</p>
</div>
<h2 id="electrichybrid_output">ElectricHybrid output<a class="headerlink" href="#electrichybrid_output" title="Permanent link">#</a></h2>
<p>There are three output parameters to be set in the SUMO configuration file to collect the statistics from the <em>device.elechybrid</em>.
The typical usage will be</p>
<pre class="codehilite"><code class="language-xml">&lt;configuration&gt;
    ...
    &lt;output&gt;
        &lt;elechybrid-output value=&quot;trolleybus.elecHybrid.out.xml&quot;/&gt;
        &lt;elechybrid-output.precision value=&quot;4&quot;/&gt;
        &lt;elechybrid-output.aggregated value=&quot;true&quot;/&gt;
        &lt;overheadwiresegments-output value=&quot;overheadWires.out.xml&quot;/&gt;
        &lt;substations-output value=&quot;substations.out.xml&quot;/&gt;
        ...
    &lt;/output&gt;
&lt;/configuration&gt;
</code></pre>

<p>This declaration will activate an <em>aggregated</em> ElectricHybrid output into <code>trolleybus.elecHybrid.out.xml</code> file
with floats being represented up to 4 decimal places:</p>
<pre class="codehilite"><code class="language-xml">&lt;elecHybrid-export-aggregated&gt;
    &lt;timestep time=&quot;0.00&quot;&gt;
        &lt;vehicle id=&quot;test1&quot; maximumBatteryCapacity=&quot;46000.0000&quot; actualBatteryCapacity=&quot;23000.0000&quot; energyConsumed=&quot;0.0000&quot; energyCharged=&quot;0.0000&quot; power=&quot;-nan(ind)&quot; overheadWireId=&quot;&quot; tractionSubstationId=&quot;&quot; current=&quot;-nan(ind)&quot; circuitVoltage=&quot;-nan(ind)&quot; alphaCircuitSolver=&quot;-nan(ind)&quot; speed=&quot;0.0000&quot; acceleration=&quot;0.0000&quot; distance=&quot;0.0000&quot; x=&quot;-1.4500&quot; y=&quot;46.3800&quot; z=&quot;0.0000&quot; slope=&quot;0.0000&quot; lane=&quot;gneE0_0&quot; posOnLane=&quot;0.0000&quot;/&gt;
        &lt;vehicle id=&quot;test2&quot; maximumBatteryCapacity=&quot;46000.0000&quot; actualBatteryCapacity=&quot;23000.0000&quot; energyConsumed=&quot;0.0000&quot; energyCharged=&quot;0.0000&quot; power=&quot;-nan(ind)&quot; overheadWireId=&quot;&quot; tractionSubstationId=&quot;&quot; current=&quot;-nan(ind)&quot; circuitVoltage=&quot;-nan(ind)&quot; alphaCircuitSolver=&quot;-nan(ind)&quot; speed=&quot;0.0000&quot; acceleration=&quot;0.0000&quot; distance=&quot;0.0000&quot; x=&quot;36.1600&quot; y=&quot;33.7600&quot; z=&quot;0.0000&quot; slope=&quot;0.0000&quot; lane=&quot;-gneE10_0&quot; posOnLane=&quot;0.0000&quot;/&gt;
    &lt;/timestep&gt;
    &lt;timestep time=&quot;1.00&quot;&gt;
        &lt;vehicle id=&quot;test1&quot; maximumBatteryCapacity=&quot;46000.0000&quot; actualBatteryCapacity=&quot;23011.1111&quot; energyConsumed=&quot;5.0570&quot; energyCharged=&quot;11.1111&quot; power=&quot;58205.3716&quot; overheadWireId=&quot;ovrhdSgmnt_gneE0_0_0&quot; tractionSubstationId=&quot;trSubstation1&quot; current=&quot;83.1523&quot; circuitVoltage=&quot;699.9850&quot; alphaCircuitSolver=&quot;1.0000&quot; speed=&quot;0.8000&quot; acceleration=&quot;0.8000&quot; distance=&quot;0.8000&quot; x=&quot;-0.6502&quot; y=&quot;46.3729&quot; z=&quot;0.0000&quot; slope=&quot;0.0000&quot; lane=&quot;gneE0_0&quot; posOnLane=&quot;0.8000&quot;/&gt;
        &lt;vehicle id=&quot;test2&quot; maximumBatteryCapacity=&quot;46000.0000&quot; actualBatteryCapacity=&quot;23011.1111&quot; energyConsumed=&quot;5.0570&quot; energyCharged=&quot;11.1111&quot; power=&quot;58205.3716&quot; overheadWireId=&quot;ovrhdSgmnt_-gneE10_0_6&quot; tractionSubstationId=&quot;trSubstation2&quot; current=&quot;97.0738&quot; circuitVoltage=&quot;599.5992&quot; alphaCircuitSolver=&quot;1.0000&quot; speed=&quot;0.8000&quot; acceleration=&quot;0.8000&quot; distance=&quot;0.8000&quot; x=&quot;36.1308&quot; y=&quot;32.9604&quot; z=&quot;0.0000&quot; slope=&quot;0.0000&quot; lane=&quot;-gneE10_0&quot; posOnLane=&quot;0.8000&quot;/&gt;
    &lt;/timestep&gt;
    ...
&lt;/elecHybrid-export-aggregated&gt;
</code></pre>

<p>Time step parameters:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>time</strong></td>
<td>float</td>
<td>Current timestep</td>
</tr>
</tbody>
</table>
<p>Vehicle parameters:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td></td>
<td>ID of vehicle that is being powered by the segment</td>
</tr>
<tr>
<td><strong>maximumBatteryCapacity</strong></td>
<td>float</td>
<td>Wh</td>
<td>Maximum battery capacity of the vehicle</td>
</tr>
<tr>
<td><strong>actualBatteryCapacity</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy of the battery at this time step</td>
</tr>
<tr>
<td><strong>energyConsumed</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy consumption at this time step</td>
</tr>
<tr>
<td><strong>energyCharged</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy charged into the battery pack</td>
</tr>
<tr>
<td><strong>power</strong></td>
<td>float</td>
<td>W</td>
<td>Power demand (requested power) from the overhead wire</td>
</tr>
<tr>
<td><strong>overheadWireId</strong></td>
<td>string</td>
<td></td>
<td>The ID of an overhead wire that is currently powering the vehicle, empty if not under a wire</td>
</tr>
<tr>
<td><strong>tractionSubstationId</strong></td>
<td>string</td>
<td></td>
<td>The ID of an substation that is feeding the current overhead wire, empty if not under a wire</td>
</tr>
<tr>
<td><strong>current</strong></td>
<td>float</td>
<td>A</td>
<td>Current drawn from the overhead wire</td>
</tr>
<tr>
<td><strong>circuitVoltage</strong></td>
<td>float</td>
<td>V</td>
<td>The actual voltage at the connection point of the pantograph / trolley poles</td>
</tr>
<tr>
<td><strong>alphaCircuitSolver</strong></td>
<td>float</td>
<td></td>
<td>Circuit solver stabilization parameter <em>&alpha;</em>, 0 &lt;= <em>&alpha;</em> &lt;= 1, 1 in case that the substation is not overloaded and all power demands were satisfied, NaN if not applicable.</td>
</tr>
<tr>
<td><strong>speed</strong></td>
<td>float</td>
<td>m/s</td>
<td>Speed of vehicle in this timestep</td>
</tr>
<tr>
<td><strong>acceleration</strong></td>
<td>float</td>
<td>m/s<sup>2</sup></td>
<td>Acceleration of vehicle in this timestep</td>
</tr>
<tr>
<td><strong>distance</strong></td>
<td>float</td>
<td>m</td>
<td>The distance covered by the vehicle from the start of simulation</td>
</tr>
<tr>
<td><strong>x</strong></td>
<td>float</td>
<td></td>
<td>absolute position x of vehicle in the map</td>
</tr>
<tr>
<td><strong>y</strong></td>
<td>float</td>
<td></td>
<td>absolute position y of vehicle in the map</td>
</tr>
<tr>
<td><strong>z</strong></td>
<td>float</td>
<td></td>
<td>absolute position z of vehicle in the map</td>
</tr>
<tr>
<td><strong>slope</strong></td>
<td>float</td>
<td>deg</td>
<td>slope of the edge in degrees</td>
</tr>
<tr>
<td><strong>lane</strong></td>
<td>string</td>
<td></td>
<td>ID of the lane that the vehicle is currently on</td>
</tr>
<tr>
<td><strong>posOnLane</strong></td>
<td>float</td>
<td>m</td>
<td>Position of vehicle on its current lane</td>
</tr>
</tbody>
</table>
<p>If a detailed output of the vehicles has been requested using <code>&lt;elecHybrid-output.aggregated value="false"/&gt;</code>,
the ElectricHybrid output generates the number of files, corresponding to the number of vehicles equipped with
<em>device.elechybrid</em>. The file names follow the rule:</p>
<pre class="codehilite"><code>filename = `elechybrid-output` value + &quot;_&quot; + `id` of vehicle + &quot;.xml&quot;.
</code></pre>

<p>The non-aggregated output files have the following structure:</p>
<pre class="codehilite"><code class="language-xml">&lt;elecHybrid-export vehicle=&quot;test1&quot; maximumBatteryCapacity=&quot;46000.00&quot; recuperationEnabled=&quot;1&quot;&gt;
    &lt;timestep time=&quot;0.00&quot; actualBatteryCapacity=&quot;23000.0000&quot; energyConsumed=&quot;0.0000&quot; energyCharged=&quot;0.0000&quot; power=&quot;-nan(ind)&quot; overheadWireId=&quot;&quot; tractionSubstationId=&quot;&quot; current=&quot;-nan(ind)&quot; circuitVoltage=&quot;-nan(ind)&quot; alphaCircuitSolver=&quot;-nan(ind)&quot; speed=&quot;0.0000&quot; acceleration=&quot;0.0000&quot; distance=&quot;0.0000&quot; x=&quot;-1.4500&quot; y=&quot;46.3800&quot; z=&quot;0.0000&quot; slope=&quot;0.0000&quot; lane=&quot;gneE0_0&quot; posOnLane=&quot;0.0000&quot;/&gt;
    &lt;timestep time=&quot;1.00&quot; actualBatteryCapacity=&quot;23011.1111&quot; energyConsumed=&quot;5.0570&quot; energyCharged=&quot;11.1111&quot; power=&quot;58205.3716&quot; overheadWireId=&quot;ovrhdSgmnt_gneE0_0_0&quot; tractionSubstationId=&quot;trSubstation1&quot; current=&quot;83.1523&quot; circuitVoltage=&quot;699.9850&quot; alphaCircuitSolver=&quot;1.0000&quot; speed=&quot;0.8000&quot; acceleration=&quot;0.8000&quot; distance=&quot;0.8000&quot; x=&quot;-0.6502&quot; y=&quot;46.3729&quot; z=&quot;0.0000&quot; slope=&quot;0.0000&quot; lane=&quot;gneE0_0&quot; posOnLane=&quot;0.8000&quot;/&gt;
    &lt;timestep time=&quot;2.00&quot; actualBatteryCapacity=&quot;23022.2222&quot; energyConsumed=&quot;9.5487&quot; energyCharged=&quot;11.1111&quot; power=&quot;74375.3992&quot; overheadWireId=&quot;ovrhdSgmnt_gneE0_0_0&quot; tractionSubstationId=&quot;trSubstation1&quot; current=&quot;106.2593&quot; circuitVoltage=&quot;699.9424&quot; alphaCircuitSolver=&quot;1.0000&quot; speed=&quot;1.6000&quot; acceleration=&quot;0.8000&quot; distance=&quot;2.4000&quot; x=&quot;0.9494&quot; y=&quot;46.3586&quot; z=&quot;0.0000&quot; slope=&quot;0.0000&quot; lane=&quot;gneE0_0&quot; posOnLane=&quot;2.4000&quot;/&gt;
    ...
&lt;/elecHybrid-export&gt;
</code></pre>

<p>Vehicle parameters:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>vehicle</strong></td>
<td>string</td>
<td></td>
<td>ID of vehicle</td>
</tr>
<tr>
<td><strong>maximumBatteryCapacity</strong></td>
<td>float</td>
<td>Wh</td>
<td>Maximum battery capacity of the vehicle</td>
</tr>
<tr>
<td><strong>recuperationEnabled</strong></td>
<td>bool</td>
<td></td>
<td>1 if the regenerative braking into the overhead wire is allowed, 0 in the opposite case</td>
</tr>
</tbody>
</table>
<p>The user can enable/disable the regenerative braking into the overhead wire using <code>overhead-wire-recuperation</code> tag in SUMO configuration file (see section <a href="#simulation_setting">Simulation setting</a> above).</p>
<p>Timestep parameters:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>time</strong></td>
<td>float</td>
<td>s</td>
<td>Current timestep</td>
</tr>
<tr>
<td><strong>actualBatteryCapacity</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy of the battery at this time step</td>
</tr>
<tr>
<td><strong>energyConsumed</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy consumption at this time step</td>
</tr>
<tr>
<td><strong>energyCharged</strong></td>
<td>float</td>
<td>Wh</td>
<td>Energy charged into the battery pack</td>
</tr>
<tr>
<td><strong>power</strong></td>
<td>float</td>
<td>W</td>
<td>Power demand (requested power) from the overhead wire</td>
</tr>
<tr>
<td><strong>overheadWireId</strong></td>
<td>string</td>
<td></td>
<td>The ID of an overhead wire that is currently powering the vehicle, empty if not under a wire</td>
</tr>
<tr>
<td><strong>tractionSubstationId</strong></td>
<td>string</td>
<td></td>
<td>The ID of an substation that is feeding the current overhead wire, empty if not under a wire</td>
</tr>
<tr>
<td><strong>current</strong></td>
<td>float</td>
<td>A</td>
<td>Current drawn from the overhead wire</td>
</tr>
<tr>
<td><strong>circuitVoltage</strong></td>
<td>float</td>
<td>V</td>
<td>The actual voltage at the connection point of the pantograph / trolley poles</td>
</tr>
<tr>
<td><strong>alphaCircuitSolver</strong></td>
<td>float</td>
<td></td>
<td>Circuit solver stabilization parameter <em>&alpha;</em>, 0 &lt;= <em>&alpha;</em> &lt;= 1, 1 in case that the substation is not overloaded and all power demands were satisfied, NaN if not applicable.</td>
</tr>
<tr>
<td><strong>speed</strong></td>
<td>float</td>
<td>m/s</td>
<td>Speed of vehicle in this timestep</td>
</tr>
<tr>
<td><strong>acceleration</strong></td>
<td>float</td>
<td>m/s<sup>2</sup></td>
<td>Acceleration of vehicle in this timestep</td>
</tr>
<tr>
<td><strong>distance</strong></td>
<td>float</td>
<td>m</td>
<td>The distance covered by the vehicle from the start of simulation</td>
</tr>
<tr>
<td><strong>x</strong></td>
<td>float</td>
<td></td>
<td>absolute position x of vehicle in the map</td>
</tr>
<tr>
<td><strong>y</strong></td>
<td>float</td>
<td></td>
<td>absolute position y of vehicle in the map</td>
</tr>
<tr>
<td><strong>z</strong></td>
<td>float</td>
<td></td>
<td>absolute position z of vehicle in the map</td>
</tr>
<tr>
<td><strong>slope</strong></td>
<td>float</td>
<td>deg</td>
<td>slope of the edge in degrees</td>
</tr>
<tr>
<td><strong>lane</strong></td>
<td>string</td>
<td></td>
<td>ID of the lane that the vehicle is currently on</td>
</tr>
<tr>
<td><strong>posOnLane</strong></td>
<td>float</td>
<td>m</td>
<td>Position of vehicle on its current lane</td>
</tr>
</tbody>
</table>
<h2 id="emission_output">Emission Output<a class="headerlink" href="#emission_output" title="Permanent link">#</a></h2>
<p>As with electric vehicles, the <a href="Emissions.html#outputs">Emission model</a>-outputs of
SUMO can be used together with the ElectricHybrid device when setting the
<code>&lt;vType&gt;</code>-parameter <code>emissionClass="Energy/unknown"</code>.</p>
<h2 id="model_details">Model Details<a class="headerlink" href="#model_details" title="Permanent link">#</a></h2>
<p>All information about the implemented device can be found in our SUMO 2019 paper.</p>
<h2 id="known_limitations">Known Limitations<a class="headerlink" href="#known_limitations" title="Permanent link">#</a></h2>
<h3 id="charging_stations">Charging Stations<a class="headerlink" href="#charging_stations" title="Permanent link">#</a></h3>
<p>As the ElectricHybrid device is based on Battery, standard chargers may be in theory used for opportunity charging the vehicle internal
energy storage. This functionality is however not yet supported.</p>
<h3 id="saving_and_loading_simulation_state">Saving and Loading Simulation State<a class="headerlink" href="#saving_and_loading_simulation_state" title="Permanent link">#</a></h3>
<p>The ElectricHybrid device does not currently support saving and loading its internal state.</p>
<h3 id="traci">TraCI<a class="headerlink" href="#traci" title="Permanent link">#</a></h3>
<p>TraCI connection has not been tested yet and it is probably not functional.</p>
<h3 id="other_limitations">Other Limitations<a class="headerlink" href="#other_limitations" title="Permanent link">#</a></h3>
<p>As of SUMO 1.11.0 we are aware of the following:</p>
<ul>
<li><strike>current limits are ignored by the traction substations</strike></li>
<li>colormap for coloring the overhead wire voltage is hardcoded</li>
<li>mesoscopic mode has not been thoroughly tested</li>
<li>placing more than one overhead wire segment on the specific lane has not been thoroughly tested and is not supported yet</li>
<li><span style="color: red;">overhead wires can be evaluated only at substation level or at segment level as the <code>&lt;overheadWire&gt;</code> element has no ID</span></li>
</ul>
<h3 id="publications">Publications<a class="headerlink" href="#publications" title="Permanent link">#</a></h3>
<p>[1] <a href="https://www.easychair.org/publications/download/bhmq">Ševčík, J., Přikryl, J. A Vehicle Device Tailored for Hybrid Trolleybuses
   and Overhead Wires Implementation in SUMO. In: Weber, M., Bieker-Walz, L.,
   Hilbrich, R., Behrisch, M. (eds.), SUMO2019. EPiC Series in Computing, vol. 62,
   pp. 145--157. EasyChair (2019)</a></p>
<p>[2] <a href="https://doi.org/10.21136/AM.2021.0280-20">Ševčík, J., Adam, L., Přikryl, J., Šmídl V. Solvability of the power flow problem
   in DC overhead wire circuit modeling. <em>Applications of Mathematics</em> (2021),
   doi: 10.21136/AM.2021.0280-20</a></p>
                </div>
          </div>
          <button onclick="goTopFunction()" id="goToTop" title="Go to top"><i class="fa-solid fa-arrow-up"></i></button>
        </div>

        <footer class="col-md-12">
          
            <br><small><i>This page was last edited on: 03 April 2024</i></small>
          
          <hr>
            <p>Copyright &copy; 2001-2024 German Aerospace Center (DLR) and others.</p>
          <p>Follow us on <a class="no-arrow-link" href="https://www.twitter.com/eclipsesumo/"><i class="fa-brands fa-x-twitter"></i></a> <a class="no-arrow-link" href="https://www.facebook.com/simulationofurbanmobility/"><i class="fa-brands fa-facebook"></i></a> <a class="no-arrow-link" href="https://www.instagram.com/eclipse.sumo/"><i class="fa-brands fa-instagram"></i></a>
          | Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a></p>
        </footer>

      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body" style="color: #495057 !important;">
                <p>Enter your search terms:</p>
                <script async src="https://cse.google.com/cse.js?cx=004302551366764109984:1kpgtzrm6kv"></script>
                <div class="gcse-search"></div>
            </div>
        </div>
    </div>
</div>
      <script>
        window.onscroll = function() {scrollFunction()};

        function scrollFunction() {
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("goToTop").style.display = "block";
          } else {
            document.getElementById("goToTop").style.display = "none";
          }
        }

        function goTopFunction() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }

        var base_url = "..",
            shortcuts = {"edit": 69, "help": 191, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>

        <script>
          const toggleSwitch = document.querySelector('#theme-switch input[type="checkbox"]');

          function switchTheme(e) {
              if (e.target.checked) {
                  localStorage.setItem('sumo-docs-theme', 'dark');
                  document.documentElement.setAttribute('data-theme', 'dark');
                  toggleSwitch.checked = true;
              } else {
                  localStorage.setItem('sumo-docs-theme', 'light');
                  document.documentElement.setAttribute('data-theme', 'light');
                  toggleSwitch.checked = false;
              }
          }

          toggleSwitch.addEventListener('change', switchTheme, false);

          if (document.documentElement.getAttribute("data-theme") == "dark"){
              toggleSwitch.checked = true;
          }
          </script>

      <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Key</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody style="color: #495057 !important;">
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help dialog</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search the Documentation</td>
                  </tr>
                  <tr>
                    <td class="edit shortcut"><kbd>e</kbd></td>
                    <td>Edit current page on GitHub</td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
    </div>
</div>
    </body>
</html>