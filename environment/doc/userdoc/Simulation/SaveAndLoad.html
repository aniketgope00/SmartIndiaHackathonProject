<!--
MkDocs version : 1.5.2
Build Date UTC : 07 May 2024 06:14:12
Last edit: 13 November 2023
-->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta property="og:image" content="../images/image-facebook.jpg">
        <meta property="og:image:type" content="image/jpeg">
        <meta property="og:image:width" content="1080">
        <meta property="og:image:height" content="1080">

        
        
        <link rel="canonical" href="https://sumo.dlr.de/docs/Simulation/SaveAndLoad.html">
        <link rel="shortcut icon" href="../images/favicon.ico">
        <title>SaveAndLoad - SUMO Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-3.7.0.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 

      <script>
        // DARK MODE
        function detectColorScheme(){
          var theme="light";

          if(localStorage.getItem("sumo-docs-theme")){
              if(localStorage.getItem("sumo-docs-theme") == "dark"){
                  var theme = "dark";
              }
          } else if(!window.matchMedia) {
              return false;
          } else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
              var theme = "dark";
          }

          if (theme=="dark") {
              document.documentElement.setAttribute("data-theme", "dark");
          }
        }
        detectColorScheme();
      </script>

    </head>

    <body>

        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary text-center">
            <div class="container-fluid">
                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../index.html" class="nav-link">Documentation</a>
                            </li>
                            <li class="navitem">
                                <a href="../Tutorials/index.html" class="nav-link">Tutorials</a>
                            </li>
                            <li class="navitem">
                                <a href="../FAQ.html" class="nav-link">FAQ</a>
                            </li>
                            <li class="navitem">
                                <a href="../Downloads.html" class="nav-link">Downloads</a>
                            </li>
                            <li class="navitem">
                                <a href="../Publications.html" class="nav-link">Publications</a>
                            </li>
                            <li class="navitem">
                                <a href="../Developer/index.html" class="nav-link">Developer</a>
                            </li>
                            <li class="navitem">
                                <a href="../ChangeLog.html" class="nav-link">ChangeLog</a>
                            </li>
                            <li class="navitem">
                                <a href="https://eclipse.dev/sumo/contact/" class="nav-link">Contact</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa-solid fa-magnifying-glass"></i> <u>S</u>earch
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="edit" href="https://github.com/eclipse-sumo/sumo/edit/main/docs/web/docs/Simulation/SaveAndLoad.md" class="nav-link"><i class="fa-brands fa-github"></i> <u>E</u>dit on GitHub</a>
                            </li>
                      <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                            More <i class="fa-solid fa-circle-chevron-down"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item no-arrow-link" href="https://github.com/eclipse/sumo/issues">Report a Bug / Issue / Typo</a>
                            <a class="dropdown-item" href="../Editing_Articles.html">Help on editing articles</a>
                            <a class="dropdown-item" href="https://github.com/eclipse/sumo/commits/main/docs/web">Recent documentation changes</a>
                            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#mkdocs_keyboard_modal">Keyboard Shortcuts</a>
                            <a class="dropdown-item no-arrow-link" href="https://sumo.dlr.de/sumo_documentation.zip">Download the Documentation</a>
                            <span class="dropdown-item" id="dark-mode-div">Dark mode <label id="theme-switch" class="theme-switch" for="checkbox_theme">
                              <input type="checkbox" id="checkbox_theme">
                          </label></span>
                          </div>
                        </li>
                        <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="languagedrop" data-toggle="dropdown">
                            <i class="fa-solid fa-language"></i> Languages <i class="fa-solid fa-circle-chevron-down"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <span class="dropdown-item">
                              Translations are generated automatically by Google Translate:
                            </span>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Simulation/SaveAndLoad.html?_x_tr_sl=en&_x_tr_tl=de">Deutsch</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Simulation/SaveAndLoad.html?_x_tr_sl=en&_x_tr_tl=es">Español</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Simulation/SaveAndLoad.html?_x_tr_sl=en&_x_tr_tl=fr">Français</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Simulation/SaveAndLoad.html?_x_tr_sl=en&_x_tr_tl=it">Italiano</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Simulation/SaveAndLoad.html?_x_tr_sl=en&_x_tr_tl=hu">Magyar</a>
                            <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Simulation/SaveAndLoad.html?_x_tr_sl=en&_x_tr_tl=tr">Türkçe</a>
                          </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container-fluid">
          <div class="row">
                <div class="col-md-3">
                  <div class="text-center"><a href="../index.html" style="display: inline-block; margin-top: 5px;"><img src="../images/sumo-logo.png" class="sumoLogo" alt="SUMO Logo" width="120px"></a></div>
                  
<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Contents">
            <span class="fa-solid fa-angle-down"></span>
        </button>
    </div>
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary toc-scroll toc">
        <ul class="nav flex-column bs-sidenav">
            <p style="margin-top:5px; color:#777777;" class="text-center">Contents</p>
            <li class="nav-item main"><a href="#saving">Saving</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#saving_at_fixed_times" class="nav-link">• Saving at fixed times</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#saving_periodically" class="nav-link">• Saving periodically</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#saving_manually" class="nav-link">• Saving manually</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#saving_via_traci" class="nav-link">• Saving via TraCI</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#further_options" class="nav-link">• Further options</a>
                </li>
            <li class="nav-item main"><a href="#loading">Loading</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#loading_via_traci" class="nav-link">• Loading via TraCI</a>
                </li>
            <li class="nav-item main"><a href="#details">Details</a></li>
            <li class="nav-item main"><a href="#random_number_generators_rng">Random number generators (RNG)</a></li>
            <li class="nav-item main"><a href="#know_issues">Know Issues</a></li>
            <li class="nav-item main"><a href="#older_versions_of_sumo">Older Versions of SUMO</a></li>
        </ul>
    </div>

    <div class="admonition conference" style="position: sticky; margin-top: 20px; margin-bottom:10px;">
        <p>visit <a class="no-arrow-link" href="https://eclipse.dev/sumo">eclipse.dev/sumo</a></p>
    </div>

</div>
                </div>
                <div class="col-md-9 main-area" role="main">
                   <!-- page.is_homepage seems to be broken in Mkdocs > 1.1.0 -->
                  <ul class="breadcrumbs">
    <script>
        var pagePath = "/docs/Simulation/SaveAndLoad.html";
        var splitUrl = pagePath.split("/");
        splitUrl.pop();
        splitUrl.shift();
        if (splitUrl[0] == 'docs') splitUrl.shift();
        var homeLink = "../index.html";
        document.write('<li class="breadcrumb-item"><a href="' + homeLink + '"><i class="fa-solid fa-house"></i></a></li>');
        var prev = '';

        var dirLink = splitUrl.map(function (el) {
        el = prev + el; prev = el + '/'; return el;
        });

        for (let i = 0; i < splitUrl.length; i++) {
            document.write("<li class=\"breadcrumb-item\"><a class=\"no-arrow-link\" href=\"../" + dirLink[i] + "\">" + splitUrl[i] + "</a></li>");
        }
    </script>
    <li class="breadcrumb-item active">SaveAndLoad</li>
</ul>
                  <hTitles>SaveAndLoad<hr style="border: 0.5px solid #338033; margin-top: 5px !important;"></hTitles>
                  
                  

<p>SUMO allows loading and saving simulation state since version 0.18.0.</p>
<h1 id="saving">Saving<a class="headerlink" href="#saving" title="Permanent link">#</a></h1>
<h2 id="saving_at_fixed_times">Saving at fixed times<a class="headerlink" href="#saving_at_fixed_times" title="Permanent link">#</a></h2>
<p>To save the state at specified times during the simulation add the
option <strong>--save-state.times</strong></p>
<pre class="codehilite"><code>sumo --save-state.times TIME1,TIME2,TIME3
</code></pre>

<p>By default the state will be written to files named <em>&lt;PREFIX&gt;_&lt;TIME&gt;&lt;SUFFIX&gt;</em> where <em>&lt;PREFIX&gt;</em> can be set via option <strong>--save-state.prefix</strong> (default <em>state</em>), <em>&lt;TIME&gt;</em> is the simulation time and <em>&lt;SUFFIX&gt;</em> is either one of <em>.xml.gz</em> or <em>.xml</em> as controlled by the option <strong>--save-state.suffix</strong> (default <em>.xml.gz</em>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The file extension '.xml.gz' indicates gzip-compressed xml which can be used directly by all Sumo applications and can also be unzipped with standard file compression tools</p>
</div>
<p>When using the option <strong>--save-state.times</strong>, output files can also be specified by using the
option <strong>--save-state.files</strong></p>
<pre class="codehilite"><code>sumo --save-state.files FILE1,FILE2,FILE3
</code></pre>

<p>to set the file names explicitly. In particular if a plain text xml-file
is desired as output (instead of the compressed format .xml.gz) the file names
should be given (with suffix .xml).</p>
<h2 id="saving_periodically">Saving periodically<a class="headerlink" href="#saving_periodically" title="Permanent link">#</a></h2>
<p>Alternatively, the option <strong>--save-state.period</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;TIME&gt;</em></a> can be used to save states periodically.
The options <strong>-save-state.prefix</strong> and <strong>--save-state.suffix</strong> apply as described above.</p>
<p>The option <strong>--save-state.period.keep N</strong> can be used to remove all but the last <strong>N</strong> state files.</p>
<h2 id="saving_manually">Saving manually<a class="headerlink" href="#saving_manually" title="Permanent link">#</a></h2>
<p><a href="../sumo-gui.html">sumo-gui</a> allows to save state files using the menu option <em>Simulation</em> -&gt; <em>Save</em></p>
<h2 id="saving_via_traci">Saving via TraCI<a class="headerlink" href="#saving_via_traci" title="Permanent link">#</a></h2>
<p>The function <code>traci.simulation.saveState(FILENAME</code>) can be used to trigger saving from a script.</p>
<h2 id="further_options">Further options<a class="headerlink" href="#further_options" title="Permanent link">#</a></h2>
<ul>
<li><strong>--save-state.rng</strong>: Save random number generator states</li>
<li><strong>--save-state.transportables</strong>: Save person and container states</li>
<li><strong>--save-state.constraints</strong>: Save rail signal constraints</li>
<li><strong>--save-state.precision</strong>: Set decimal precision when saving states</li>
</ul>
<h1 id="loading">Loading<a class="headerlink" href="#loading" title="Permanent link">#</a></h1>
<p>The option <strong>--load-state</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;FILE&gt;</em></a> is used to initialize the simulation with the given state
file. It is recommended to start the simulation with the same input
files that were used when saving the state file and set option <strong>--begin</strong> to the
time when the state was saved. Additional files (i.e. more vehicles) can
be added without problems.</p>
<p>When the option <strong>--load-state.offset</strong> is set, all times loaded from the simulation state will
be shifted by the given amount. This can be used to reset the simulation
second to 0 after midnight and still have the loaded vehicles function
properly.</p>
<p>The option <strong>--load-state.remove-vehicles ID1,ID2,...</strong> allows removing vehicles from a loaded state. This opens up
the possibility for re-positioning selected vehicles by inserting them
again with a <em>.rou.xml</em> file.</p>
<h2 id="loading_via_traci">Loading via TraCI<a class="headerlink" href="#loading_via_traci" title="Permanent link">#</a></h2>
<p>There are two ways for loading state via TraCI:</p>
<ul>
<li><code>traci.load(['-n', 'net.net.xml', '--load-state', FILENAME])</code>: reloads the whole simulation (which includes reloading the network)</li>
<li><code>traci.simulation.loadState(FILENAME)</code> : clears out all vehicles and persons from the network and then loads the state. (reloading the network is avoided)</li>
</ul>
<p>The second function faster (or much faster) than the first, depending on the size of the network.</p>
<h1 id="details">Details<a class="headerlink" href="#details" title="Permanent link">#</a></h1>
<p>Vehicles that have not yet departed are not included in the simulation
state and must be loaded from input files. When loading vehicles from an
input file that are already present in the simulation state, these
vehicles are automatically ignored and loading proceeds without errors.</p>
<h1 id="random_number_generators_rng">Random number generators (RNG)<a class="headerlink" href="#random_number_generators_rng" title="Permanent link">#</a></h1>
<p>By default, the state of the <a href="Randomness.html">random number generators</a> is not saved. Thus,
simulations will behave differently from the original after being reloaded from a state.</p>
<p>When setting option <strong>--save-state.rng</strong>, the state of all random number generators will be included in the state and restored upon loading. Saving this extra state costs about 500Kb. If this overhead is too high it can be reduced by setting a lower value of <strong>--thread-rngs</strong> (default 64). The value should be no lower than the number of threads used for routing or simulation (<strong>--threads, </strong>--device.rerouting.threads**).</p>
<h1 id="know_issues">Know Issues<a class="headerlink" href="#know_issues" title="Permanent link">#</a></h1>
<ul>
<li>flows cannot be loaded from a state file alone (the original route file must be loaded as well)</li>
<li>The internal state of the laneChangeModel is not saved</li>
<li>the internal state of the carFollowModel is not saved (not all models have this).</li>
</ul>
<h1 id="older_versions_of_sumo">Older Versions of SUMO<a class="headerlink" href="#older_versions_of_sumo" title="Permanent link">#</a></h1>
<p>On versions before 0.18.0 a possible workaround is to run SUMO within a
virtual machine (VM) as the state of a VM can be saved at any time.
Tests with VirtualBox on Linux have shown that SUMO does not run
significantly slower in a VM as directly on the host if enough hardware
resources are assigned to the VM (for example if you run another program
simultaneously to communicate to SUMO via TraCI you should assign enough
CPU-cores to the VM).</p>
                </div>
          </div>
          <button onclick="goTopFunction()" id="goToTop" title="Go to top"><i class="fa-solid fa-arrow-up"></i></button>
        </div>

        <footer class="col-md-12">
          
            <br><small><i>This page was last edited on: 13 November 2023</i></small>
          
          <hr>
            <p>Copyright &copy; 2001-2024 German Aerospace Center (DLR) and others.</p>
          <p>Follow us on <a class="no-arrow-link" href="https://www.twitter.com/eclipsesumo/"><i class="fa-brands fa-x-twitter"></i></a> <a class="no-arrow-link" href="https://www.facebook.com/simulationofurbanmobility/"><i class="fa-brands fa-facebook"></i></a> <a class="no-arrow-link" href="https://www.instagram.com/eclipse.sumo/"><i class="fa-brands fa-instagram"></i></a>
          | Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a></p>
        </footer>

      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body" style="color: #495057 !important;">
                <p>Enter your search terms:</p>
                <script async src="https://cse.google.com/cse.js?cx=004302551366764109984:1kpgtzrm6kv"></script>
                <div class="gcse-search"></div>
            </div>
        </div>
    </div>
</div>
      <script>
        window.onscroll = function() {scrollFunction()};

        function scrollFunction() {
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("goToTop").style.display = "block";
          } else {
            document.getElementById("goToTop").style.display = "none";
          }
        }

        function goTopFunction() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }

        var base_url = "..",
            shortcuts = {"edit": 69, "help": 191, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>

        <script>
          const toggleSwitch = document.querySelector('#theme-switch input[type="checkbox"]');

          function switchTheme(e) {
              if (e.target.checked) {
                  localStorage.setItem('sumo-docs-theme', 'dark');
                  document.documentElement.setAttribute('data-theme', 'dark');
                  toggleSwitch.checked = true;
              } else {
                  localStorage.setItem('sumo-docs-theme', 'light');
                  document.documentElement.setAttribute('data-theme', 'light');
                  toggleSwitch.checked = false;
              }
          }

          toggleSwitch.addEventListener('change', switchTheme, false);

          if (document.documentElement.getAttribute("data-theme") == "dark"){
              toggleSwitch.checked = true;
          }
          </script>

      <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Key</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody style="color: #495057 !important;">
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help dialog</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search the Documentation</td>
                  </tr>
                  <tr>
                    <td class="edit shortcut"><kbd>e</kbd></td>
                    <td>Edit current page on GitHub</td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
    </div>
</div>
    </body>
</html>